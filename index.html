<!doctype html>
<html lang="pt-BR">

<head>
  <meta charset="UTF-8" />
  <link rel="icon" type="image/svg+xml" href="/vite.svg" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="src/style.css">
  <script src="https://unpkg.com/lucide@latest"></script>

  <title>Vite App</title>
</head>

<body>
  <main class=" px-2 lg:px-0 lg:w-250 m-auto my-10 ">


    <div class="max-w-100">

      <div class="mb-3">

        <label class="input w-full">
          <span class="label">Nome:</span>
          <input type="text" placeholder="Seu nome" />
        </label>
      </div>


      <div>
        <div class="join w-full">

          <label class="input join-item w-full">
            <span class="label">Data:</span>
            <input type="text" class="input" id="data">
          </label>
          <button popovertarget="cally-popover1" id="cally1" class=" btn btn-primary join-item cursor-pointer"
            style="anchor-name:--cally1">
            <i data-lucide="calendar-days"></i>
          </button>
        </div>


      </div>
    </div>
    <div popover id="cally-popover1" class="dropdown bg-base-100 rounded-box shadow-lg"
      style="position-anchor:--cally1">
      <calendar-date class="cally" id="date-picker">
        <svg aria-label=" Previous" class="fill-current size-4" slot="previous" xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 24 24">
          <path d="M15.75 19.5 8.25 12l7.5-7.5"></path>
        </svg>
        <svg aria-label="Next" class="fill-current size-4" slot="next" xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 24 24">
          <path d="m8.25 4.5 7.5 7.5-7.5 7.5"></path>
        </svg>
        <calendar-month></calendar-month>
      </calendar-date>
    </div>

    <article class="flex flex-wrap-reverse sm:flex-nowrap mt-5 gap-1">
      <section class=" shrink-0 basis-60 grow  self-stretch mb-4 sm:mb-0">
        <h2 class="text-accent-content bg-accent px-2 rounded-lg text-lg w-full">Escolha a cor</h2>

        <div class="grid p-1 gap-x-2 grid-cols-4 grid-rows-2 mb-10">
          <input type="color" class="row-span-2 w-full h-full " id="color-code">

          <p class="col-span-3">Código da cor</p>
          <p class="col-span-3" id="color-code-field">codigo</p>

        </div>

        <button class="btn w-full btn-success" id="validar">Validar</button>

      </section>
      <section class="basis-100 grow shrink">
        <h1 class="text-primary-content bg-primary px-2 rounded-lg text-lg">Quantas sílabas tem?</h1>
        <section class="p-1">
          <h2>Pinte a quantidade de sílabas, ao final, valide sua tentativa</h2>

          <section class="grid grid-cols-2 md:grid-cols-3 gap-5 " id="itensImagens">
            <div>
              <div class="skeleton w-ful h-30"></div>
              <div class=" text-center">Parafuso</div>

              <div class="num-silabas display grid grid-cols-4">

                <div class="text-center" control-value="1">1</div>
                <div class="text-center" control-value="2">2</div>
                <div class="text-center" control-value="3">3</div>
                <div class="text-center" control-value="4">4</div>
              </div>
            </div>


          </section>

        </section>
      </section>




    </article>

    <div role="alert" class="alert alert-neutral fixed bottom-3 left-2 right-2 hidden" id="modal">
      <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 shrink-0 stroke-current cursor-pointer" id="close-modal"
        fill="none" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
          d="M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z" />
      </svg>
      <span id="modal-content" style="white-space: pre;" class="font-mono"></span>
    </div>

  </main>
  <script type="module" src="/src/main.js"></script>
  <script src="https://unpkg.com/lucide@latest"></script>



  <script type="module">
    import itens from "./src/itens.js"

    let itensPlacement = document.getElementById("itensImagens")
    itensPlacement.innerHTML = ""

    itens.forEach(e => {
      itensPlacement.innerHTML += `
      <div class="border rounded-lg p-2 mb-6 sm:mb-0">
        <img src="${(e.nome)}.png" />
        <div class=" text-center">${e.nome.toUpperCase()}</div>

        <div class="num-silabas  display grid grid-cols-4">

          <div class="text-center cursor-pointer" control-value="1">1</div>
          <div class="text-center cursor-pointer" control-value="2">2</div>
          <div class="text-center cursor-pointer" control-value="3">3</div>
          <div class="text-center cursor-pointer" control-value="4">4</div>
        </div>
      </div>
      
      `
    })

    lucide.createIcons();

    const hoje = new Date();

    const ano = hoje.getFullYear();
    const mes = String(hoje.getMonth() + 1).padStart(2, '0');
    const dia = String(hoje.getDate()).padStart(2, '0');




    document.getElementById("data").value = `${dia}/${mes}/${ano}`
    document.getElementById("date-picker").addEventListener("change", function () {

      const [ano, mes, dia] = this.value.split("-");
      document.getElementById('data').value = `${dia}/${mes}/${ano}`

    })

    const colorEl = document.getElementById("color-code")

    colorEl.value = "#422ad5"
    let color = colorEl.value

    document.getElementById("color-code-field").innerText = color

    let currentColor = color


    document.getElementById("color-code").addEventListener("change", function changeColor() {
      currentColor = this.value
      document.getElementById("color-code-field").innerText = currentColor
    })


    const cards = document.querySelectorAll(".num-silabas")

    cards.forEach(function (card) {


      card.addEventListener("click", function (e) {
        const clicado = e.target

        Array.from(card.children).forEach(c => {
          c.removeAttribute("marked")
          c.style = "background-color: transparent"
        })


        if (card.contains(clicado) && clicado !== card) {
          clicado.setAttribute("marked", "")
          clicado.style = "background-color: " + currentColor
        }
      })
    })


    document.getElementById("validar").addEventListener("click", function () {
      const resposta = Array.from(cards).map(function (card, index) {

        if (card.querySelector("div[marked]")?.getAttribute("control-value") == itens[index].silabas) {
          return itens[index].nome.padEnd(10, " ") + ": está correto"
        }
        return itens[index].nome.padEnd(10, " ") + ": está errado"

      })

      document.getElementById("modal-content").innerText = resposta.join("\n")
      document.getElementById("modal").classList.remove("hidden")


      setTimeout(() => {
        modal.classList.add("hidden");
      }, 5000);


    })

    document.getElementById("close-modal").addEventListener("click", _ => {
      const modal = document.getElementById("modal");
      modal.classList.add("hidden");


    })




  </script>
</body>

</html>